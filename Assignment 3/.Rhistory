data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS))
data5$Treat <- ifelse(data5$STATE ==1,1,0)
prop <- matchit(Treat ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + PCTAFF + MEALS + OPEN + PSODA + PFRY + PENTREE + NREGS11, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = FALSE)
View(data5)
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
data5$Treat <- ifelse(data5$STATE ==1,1,0)
prop <- matchit(Treat ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + PCTAFF + MEALS + OPEN + PSODA + PFRY + PENTREE + NREGS11, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = FALSE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
data_m<- match.data(prop)
r1_m <- lm(EMP1 ~ Treat + HRSOPEN + INCTIME + NREGS, data_m)
r2_m <- lm(EMP2 ~ Treat + HRSOPEN + INCTIME + NREGS, data_m)
r1_m
r2_m
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
data5$Treat <- ifelse(data5$STATE ==1,1,0)
prop <- matchit(Treat ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + PCTAFF + MEALS + OPEN + PSODA + PFRY + PENTREE + NREGS11, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = FALSE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
data_m<- match.data(prop)
r1_m <- lm(EMP1 ~ Treat + HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + PCTAFF + MEALS + OPEN + PSODA + PFRY + PENTREE + NREGS11, data_m)
r2_m <- lm(EMP2 ~ Treat + HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + PCTAFF + MEALS + OPEN + PSODA + PFRY + PENTREE + NREGS11, data_m)
r1_m
r2_m
r3_m <- lm(difE ~ Treat + HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + PCTAFF + MEALS + OPEN + PSODA + PFRY + PENTREE + NREGS11, data_m)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
View(data_m)
sum(data5$prop(((data5$Treat*data5$difE)/data5$prop) - ((1-data5$Treat)*data5$difE/(1-data5$prop))))/sum(data5$prop)
data5$Treat*data5$difE
data5$Treat*data5$difE)/data5$prop
(data5$Treat*data5$difE)/data5$prop
sum(data5$prop*(((data5$Treat*data5$difE)/data5$prop) - ((1-data5$Treat)*data5$difE/(1-data5$prop))))/sum(data5$prop)
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
gEMP1 <- cdfCompare(dataNJ$EMP1[0:74], dataPA$EMP1[0:304])
gEMP2 <- cdfCompare(dataNJ$EMP1, dataPA$EMP1)
hEMP1 <- hist(dataNJ$EMPFT)
hEMP2 <- hist(dataPA$EMPFT)
#plot(ha,col = "blue" , xlim = c(0, 50), ylim = c(0,100))
#plot (hb, col = "red", add = TRUE)
probit <- glm(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + PCTAFF + MEALS + OPEN + PSODA + PFRY + PENTREE + NREGS11, family = binomial(link = "probit"), data = data)
data$prop <- predict(probit, type = "response", data)
stargazer(probit, column.labels = c("", ""),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:probit")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
graph1 <- cdfCompare(dataNJ$prop[0:74], dataPA$prop[0:304])
gEMP2
gEMP2 <- cdfCompare(dataNJ$EMP1, dataPA$EMP1)
gEMP2 <- cdfCompare(dataNJ$EMP1, dataPA$EMP1)
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
gEMP2 <- cdfCompare(dataNJ$EMP1, dataPA$EMP1)
# put two histrograms in one?
hEMP1 <- hist(dataNJ$EMPFT)
hEMP2 <- hist(dataPA$EMPFT)
#plot(ha,col = "blue" , xlim = c(0, 50), ylim = c(0,100))
#plot (hb, col = "red", add = TRUE)
# PCTAFF????
probit <- glm(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + FIRSTINC + BONUS + MEALS+ PSODA, family = binomial(link = "probit"), data = data)
data$prop <- predict(probit, type = "response", data)
stargazer(probit, column.labels = c("", ""),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:probit")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
graph1 <- cdfCompare(dataNJ$prop, dataPA$prop)
summary(data)
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
gEMP2 <- cdfCompare(dataNJ$EMP1, dataPA$EMP1)
# put two histrograms in one?
hEMP1 <- hist(dataNJ$EMPFT)
hEMP2 <- hist(dataPA$EMPFT)
#plot(ha,col = "blue" , xlim = c(0, 50), ylim = c(0,100))
#plot (hb, col = "red", add = TRUE)
# PCTAFF????
probit <- glm(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, family = binomial(link = "probit"), data = data)
data$prop <- predict(probit, type = "response", data)
stargazer(probit, column.labels = c("", ""),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:probit")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
graph1 <- cdfCompare(dataNJ$prop, dataPA$prop)
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
data_m<- match.data(prop)
r1_m <- lm(EMP1 ~ STATE + HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data_m)
r2_m <- lm(EMP2 ~ STATE + HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data_m)
r1_m
r2_m
r3_m <- lm(difE ~  STATE + HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data_m)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
sum(data5$prop*(((data5$STATE*data5$difE)/data5$prop) - ((1-data5$STATE)*data5$difE/(1-data5$prop))))/sum(data5$prop)
r3_m <- lm(difE ~  STATE , data_m)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
data_m<- match.data(prop)
r1_m <- lm(EMP1 ~ STATE, data_m)
r2_m <- lm(EMP2 ~ STATE, data_m)
r1_m
r2_m
r3_m <- lm(difE ~  STATE, data_m)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
bal.tab(prop, disp.subclass = TRUE)
install.packages("cobalt")
library(cobalt)
bal.tab(prop, disp.subclass = TRUE)
library(cobalt)
bal.tab(prop, disp.subclass = TRUE)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
bal.plot(data$EMP1, treat = data$STATE, var.name = "EMP")
bal.plot(data, treat = data$STATE, var.name = "EMP")
bal.plot(data, treat = data$STATE, var.name = "EMP1")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "EMP1")
bal.plot(data, treat = data$STATE, var.name = "EMPFT")
bal.plot(data, treat = data$STATE, var.name = "HRSOPEN")
bal.plot(data, treat = data$STATE, var.name = "INCTIME")
bal.plot(data, treat = data$STATE, var.name = "NREGS")
bal.plot(data, treat = data$STATE, var.name = "CHAIN")
bal.plot(data, treat = data$STATE, var.name = "CO_OWNED")
bal.plot(data, treat = data$STATE, var.name = "WAGE_ST")
bal.plot(data, treat = data$STATE, var.name = "BONUS")
bal.plot(data, treat = data$STATE, var.name = "MEALS")
bal.plot(data, treat = data$STATE, var.name = "PSODA")
# PCTAFF????
probit <- glm(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, family = binomial(link = "probit"), data = data)
data$prop <- predict(probit, type = "response", data)
stargazer(probit, column.labels = c("", ""),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:probit")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "prop")
rm(list=ls())
if (!require("pacman")) install.packages("pacman")
pacman::p_load(ggplot2, stargazer, lmtest, plm,
sandwich, fixest, cobalt, modelsummary, vtable, foreign, RCT, reshape2,
MatchIt, EnvStats
)
#set tidy code
knitr::opts_chunk$set(tidy.opts = list(width.cutoff = 65), tidy = TRUE)
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
rm(list=ls())
if (!require("pacman")) install.packages("pacman")
pacman::p_load(ggplot2, stargazer, lmtest, plm,
sandwich, fixest, cobalt, modelsummary, vtable, foreign, RCT, reshape2,
MatchIt, EnvStats
)
#set tidy code
knitr::opts_chunk$set(tidy.opts = list(width.cutoff = 65), tidy = TRUE)
data <- read.dta("CardKrueger.dta")
data <- subset(data, !is.na(EMPFT)&!is.na(EMPFT2)&!is.na(EMPFT2)&!is.na(EMPPT2)&!is.na(NMGRS)&!is.na(NMGRS2))
data <- read.dta("CardKrueger.dta")
data <- subset(data, !is.na(EMPFT)&!is.na(EMPFT2)&!is.na(EMPFT2)&!is.na(EMPPT2)&!is.na(NMGRS)&!is.na(NMGRS2))
NJemp1a <- mean(data$EMPFT[data$STATE==1])+0.5*mean(data$EMPPT[data$STATE==1])+mean(data$NMGRS[data$STATE==1])
NJemp2a <- mean(data$EMPFT2[data$STATE==1])+0.5*mean(data$EMPPT2[data$STATE==1])+mean(data$NMGRS2[data$STATE==1])
PAemp1a <- mean(data$EMPFT[data$STATE==0])+0.5*mean(data$EMPPT[data$STATE==0])+mean(data$NMGRS[data$STATE==0])
PAemp2a <- mean(data$EMPFT2[data$STATE==0])+0.5*mean(data$EMPPT2[data$STATE==0])+mean(data$NMGRS2[data$STATE==0])
EffNJa <- NJemp2a-NJemp1a
EffPAa <- PAemp2a-PAemp1a
DiffDiffa <- EffNJa - EffPAa
DiffDiffa
data1 <- subset(data, STATUS2==1)
NJemp1b <- mean(data1$EMPFT[data1$STATE==1])+0.5*mean(data1$EMPPT[data1$STATE==1])+mean(data1$NMGRS[data1$STATE==1])
NJemp2b <- mean(data1$EMPFT2[data1$STATE==1])+0.5*mean(data1$EMPPT2[data1$STATE==1])+mean(data1$NMGRS2[data1$STATE==1])
PAemp1b <- mean(data1$EMPFT[data1$STATE==0])+0.5*mean(data1$EMPPT[data1$STATE==0])+mean(data1$NMGRS[data1$STATE==0])
PAemp2b <- mean(data1$EMPFT2[data1$STATE==0])+0.5*mean(data1$EMPPT2[data1$STATE==0])+mean(data1$NMGRS2[data1$STATE==0])
EffNJb <- NJemp2b-NJemp1b
EffPAb <- PAemp2b-PAemp1b
DiffDiffb <- EffNJb - EffPAb
DiffDiffb
data <- data1
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP1-data$EMP2
m1 <- lm(difE ~ STATE, data)
m2 <- lm(difE ~ STATE+ HRSOPEN*STATE + HRSOPEN, data) # potential interaction effects!
m3 <- lm(difE ~ STATE+ OPEN*STATE + OPEN, data)
m4 <- lm(difE ~ STATE+ NREGS*STATE + NREGS, data)
m5 <- lm(difE ~ STATE+ NREGS11*STATE + NREGS11, data)
m6 <- lm(difE ~ STATE+ WAGE_ST, data)
m7 <- lm(difE ~ STATE+ WAGE_ST+OPEN, data)
m8 <- lm(difE ~ STATE+ WAGE_ST+OPEN+PCTAFF, data)
dif_eff1 <-m1$coefficients[2]
dif_eff2 <-m2$coefficients[2]
stargazer(m1, m2,m3,m4,m5,m6, m7, m8, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data3 <- subset(data, select = -c(STATUS2))
balance <- balance_table(data3, "STATE")
knitr::kable(balance, caption = "Balance Table")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "EMP1")
bal.plot(data, treat = data$STATE, var.name = "EMPFT")
bal.plot(data, treat = data$STATE, var.name = "HRSOPEN")
bal.plot(data, treat = data$STATE, var.name = "INCTIME")
bal.plot(data, treat = data$STATE, var.name = "NREGS")
bal.plot(data, treat = data$STATE, var.name = "CHAIN")
bal.plot(data, treat = data$STATE, var.name = "CO_OWNED")
bal.plot(data, treat = data$STATE, var.name = "WAGE_ST")
bal.plot(data, treat = data$STATE, var.name = "BONUS")
bal.plot(data, treat = data$STATE, var.name = "MEALS")
bal.plot(data, treat = data$STATE, var.name = "PSODA")
# PCTAFF????
probit <- glm(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, family = binomial(link = "probit"), data = data)
data$prop <- predict(probit, type = "response", data)
stargazer(probit, column.labels = c("", ""),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:probit")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "prop")
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
View(prop)
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m<- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
r1_m <- lm(EMP1 ~ STATE, data_m)
r2_m <- lm(EMP2 ~ STATE, data_m)
r1_m
r2_m
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m<- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
r1_m <- lm(EMP1 ~ STATE, data_m, weights = prop$weights)
weights = prop$weights
weights
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m<- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
r1_m <- lm(EMP1 ~ STATE, data_m, weights = weights)
r2_m <- lm(EMP2 ~ STATE, data_m, weights = prop$weights)
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m<- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
r1_m <- lm(EMP1 ~ STATE, data_m, weights = weights)
r2_m <- lm(EMP2 ~ STATE, data_m, weights = weights)
r1_m
r2_m
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m<- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
weight = prop$weights
r1_m <- lm(EMP1 ~ STATE, data_m, weights = weight)
weight
View(data_m)
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m<- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
weight = prop$weights
r1_m <- lm(EMP1 ~ STATE, data_m, weights = data_m$weights)
r2_m <- lm(EMP2 ~ STATE, data_m, weights = data_m$weights)
r1_m
r2_m
View(prop)
r3_m <- lm(difE ~  STATE, data_m, weights = data_m$weights)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
sum(data5$prop*(((data5$STATE*data5$difE)/data5$prop) - ((1-data5$STATE)*data5$difE/(1-data5$prop))))/sum(data5$prop)
sum(data_m$prop*(((data_m$STATE*data_m$difE)/data_m$prop) - ((1-data_m$STATE)*data_m$difE/(1-data_m$prop))))/sum(data_m$prop)
rm(list=ls())
if (!require("pacman")) install.packages("pacman")
pacman::p_load(ggplot2, stargazer, lmtest, plm,
sandwich, fixest, cobalt, modelsummary, vtable, foreign, RCT, reshape2,
MatchIt, EnvStats
)
#set tidy code
knitr::opts_chunk$set(tidy.opts = list(width.cutoff = 65), tidy = TRUE)
data <- read.dta("CardKrueger.dta")
data <- subset(data, !is.na(EMPFT)&!is.na(EMPFT2)&!is.na(EMPFT2)&!is.na(EMPPT2)&!is.na(NMGRS)&!is.na(NMGRS2))
NJemp1a <- mean(data$EMPFT[data$STATE==1])+0.5*mean(data$EMPPT[data$STATE==1])+mean(data$NMGRS[data$STATE==1])
NJemp2a <- mean(data$EMPFT2[data$STATE==1])+0.5*mean(data$EMPPT2[data$STATE==1])+mean(data$NMGRS2[data$STATE==1])
PAemp1a <- mean(data$EMPFT[data$STATE==0])+0.5*mean(data$EMPPT[data$STATE==0])+mean(data$NMGRS[data$STATE==0])
PAemp2a <- mean(data$EMPFT2[data$STATE==0])+0.5*mean(data$EMPPT2[data$STATE==0])+mean(data$NMGRS2[data$STATE==0])
EffNJa <- NJemp2a-NJemp1a
EffPAa <- PAemp2a-PAemp1a
DiffDiffa <- EffNJa - EffPAa
DiffDiffa
data1 <- subset(data, STATUS2==1)
NJemp1b <- mean(data1$EMPFT[data1$STATE==1])+0.5*mean(data1$EMPPT[data1$STATE==1])+mean(data1$NMGRS[data1$STATE==1])
NJemp2b <- mean(data1$EMPFT2[data1$STATE==1])+0.5*mean(data1$EMPPT2[data1$STATE==1])+mean(data1$NMGRS2[data1$STATE==1])
PAemp1b <- mean(data1$EMPFT[data1$STATE==0])+0.5*mean(data1$EMPPT[data1$STATE==0])+mean(data1$NMGRS[data1$STATE==0])
PAemp2b <- mean(data1$EMPFT2[data1$STATE==0])+0.5*mean(data1$EMPPT2[data1$STATE==0])+mean(data1$NMGRS2[data1$STATE==0])
EffNJb <- NJemp2b-NJemp1b
EffPAb <- PAemp2b-PAemp1b
DiffDiffb <- EffNJb - EffPAb
DiffDiffb
data <- data1
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP1-data$EMP2
m1 <- lm(difE ~ STATE, data)
m2 <- lm(difE ~ STATE+ HRSOPEN*STATE + HRSOPEN, data) # potential interaction effects!
m3 <- lm(difE ~ STATE+ OPEN*STATE + OPEN, data)
m4 <- lm(difE ~ STATE+ NREGS*STATE + NREGS, data)
m5 <- lm(difE ~ STATE+ NREGS11*STATE + NREGS11, data)
m6 <- lm(difE ~ STATE+ WAGE_ST, data)
m7 <- lm(difE ~ STATE+ WAGE_ST+OPEN, data)
m8 <- lm(difE ~ STATE+ WAGE_ST+OPEN+PCTAFF, data)
dif_eff1 <-m1$coefficients[2]
dif_eff2 <-m2$coefficients[2]
stargazer(m1, m2,m3,m4,m5,m6, m7, m8, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data3 <- subset(data, select = -c(STATUS2))
balance <- balance_table(data3, "STATE")
knitr::kable(balance, caption = "Balance Table")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "EMP1")
bal.plot(data, treat = data$STATE, var.name = "EMPFT")
bal.plot(data, treat = data$STATE, var.name = "HRSOPEN")
bal.plot(data, treat = data$STATE, var.name = "INCTIME")
bal.plot(data, treat = data$STATE, var.name = "NREGS")
bal.plot(data, treat = data$STATE, var.name = "CHAIN")
bal.plot(data, treat = data$STATE, var.name = "CO_OWNED")
bal.plot(data, treat = data$STATE, var.name = "WAGE_ST")
bal.plot(data, treat = data$STATE, var.name = "BONUS")
bal.plot(data, treat = data$STATE, var.name = "MEALS")
bal.plot(data, treat = data$STATE, var.name = "PSODA")
# PCTAFF????
probit <- glm(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, family = binomial(link = "probit"), data = data)
data$prop <- predict(probit, type = "response", data)
stargazer(probit, column.labels = c("", ""),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:probit")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "prop")
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m <- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
weight = prop$weights
r1_m <- lm(EMP1 ~ STATE, data_m, weights = data_m$weights)
r2_m <- lm(EMP2 ~ STATE, data_m, weights = data_m$weights)
r1_m
r2_m
r3_m <- lm(difE ~  STATE, data_m, weights = data_m$weights)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
sum(data_m$prop*(((data_m$STATE*data_m$difE)/data_m$prop) - ((1-data_m$STATE)*data_m$difE/(1-data_m$prop))))/sum(data_m$prop)
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP2-data$EMP1
m1 <- lm(difE ~ STATE, data)
m2 <- lm(difE ~ STATE+ HRSOPEN*STATE + HRSOPEN, data) # potential interaction effects!
m3 <- lm(difE ~ STATE+ OPEN*STATE + OPEN, data)
m4 <- lm(difE ~ STATE+ NREGS*STATE + NREGS, data)
m5 <- lm(difE ~ STATE+ NREGS11*STATE + NREGS11, data)
m6 <- lm(difE ~ STATE+ WAGE_ST, data)
m7 <- lm(difE ~ STATE+ WAGE_ST+OPEN, data)
m8 <- lm(difE ~ STATE+ WAGE_ST+OPEN+PCTAFF, data)
dif_eff1 <-m1$coefficients[2]
dif_eff2 <-m2$coefficients[2]
stargazer(m1, m2,m3,m4,m5,m6, m7, m8, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data3 <- subset(data, select = -c(STATUS2))
balance <- balance_table(data3, "STATE")
knitr::kable(balance, caption = "Balance Table")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "EMP1")
bal.plot(data, treat = data$STATE, var.name = "EMPFT")
bal.plot(data, treat = data$STATE, var.name = "HRSOPEN")
bal.plot(data, treat = data$STATE, var.name = "INCTIME")
bal.plot(data, treat = data$STATE, var.name = "NREGS")
bal.plot(data, treat = data$STATE, var.name = "CHAIN")
bal.plot(data, treat = data$STATE, var.name = "CO_OWNED")
bal.plot(data, treat = data$STATE, var.name = "WAGE_ST")
bal.plot(data, treat = data$STATE, var.name = "BONUS")
bal.plot(data, treat = data$STATE, var.name = "MEALS")
bal.plot(data, treat = data$STATE, var.name = "PSODA")
# PCTAFF????
probit <- glm(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, family = binomial(link = "probit"), data = data)
data$prop <- predict(probit, type = "response", data)
stargazer(probit, column.labels = c("", ""),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:probit")
dataNJ <- subset(data, STATE==1)
dataPA <- subset(data, STATE==0)
bal.plot(data, treat = data$STATE, var.name = "prop")
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m <- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
weight = prop$weights
r1_m <- lm(EMP1 ~ STATE, data_m, weights = data_m$weights)
r2_m <- lm(EMP2 ~ STATE, data_m, weights = data_m$weights)
r1_m
r2_m
r3_m <- lm(difE ~  STATE, data_m, weights = data_m$weights)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP2-data$EMP1
m1 <- lm(difE ~ STATE, data)
dif_eff1 <-m1$coefficients[2]
dif_eff2 <-m2$coefficients[2]
stargazer(m1, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP2-data$EMP1
m1 <- lm(difE ~ STATE, data)
dif_eff1 <-m1$coefficients[2]
stargazer(m1, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP2-data$EMP1
data$difOpen <- data$OPEN2R - data$OPEN
m1 <- lm(difE ~ STATE, data)
m2 <- lm(difE ~ STATE + difOpen, data)
dif_eff1 <-m1$coefficients[2]
stargazer(m1, m2, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP2-data$EMP1
data$difOpen <- data$OPEN2R - data$OPEN
m1 <- lm(difE ~ STATE, data)
m2 <- lm(difE ~ STATE + difOpen, data)
m3 <- lm(difE ~ STATE + difOpen + PCTAFF, data)
dif_eff1 <-m1$coefficients[2]
stargazer(m1, m2,m3, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP2-data$EMP1
data$difOpen <- data$OPEN2R - data$OPEN
m1 <- lm(difE ~ STATE, data)
m2 <- lm(difE ~ STATE + difOpen, data)
m3 <- lm(difE ~ STATE + PCTAFF, data)
m4 <- lm(difE ~ STATE + difOpen + PCTAFF, data)
dif_eff1 <-m1$coefficients[2]
stargazer(m1, m2,m3, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
data$EMP1 <- data$EMPFT+0.5*data$EMPPT+data$NMGRS
data$EMP2 <- data$EMPFT2+0.5*data$EMPPT2+data$NMGRS2
data$difE <- data$EMP2-data$EMP1
data$difOpen <- data$OPEN2R - data$OPEN
m1 <- lm(difE ~ STATE, data)
m2 <- lm(difE ~ STATE + difOpen, data)
m3 <- lm(difE ~ STATE + PCTAFF, data)
m4 <- lm(difE ~ STATE + difOpen + PCTAFF, data)
dif_eff1 <-m1$coefficients[2]
stargazer(m1, m2,m3,m4, column.labels = c("", "Controls"),type = "text",
title = "Minimum Wage", header = FALSE, label = "tab:reg1")
# https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.665.635&rep=rep1&type=pdf
data5 <- subset(data, !is.na(HRSOPEN)&!is.na(INCTIME)&!is.na(NREGS)&!is.na(prop))
prop <- matchit(STATE ~ HRSOPEN + INCTIME + NREGS+ CHAIN + CO_OWNED + WAGE_ST + BONUS + MEALS+ PSODA, data = data5, method = "nearest", distance = data5$prop, ratio = 1, replace = TRUE)
# it does not use the proposenty score "distance = prs_df$pr_score" / distance ="glm"
summary(prop)
bal.tab(prop, disp.subclass = TRUE)
data_m <- match.data(prop)
bal.plot(data_m, treat = data_m$STATE, var.name = "prop")
weight = prop$weights
r1_m <- lm(EMP1 ~ STATE, data_m, weights = data_m$weights)
r2_m <- lm(EMP2 ~ STATE, data_m, weights = data_m$weights)
r1_m
r2_m
# https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.665.635&rep=rep1&type=pdf
r3_m <- lm(difE ~  STATE, data_m, weights = data_m$weights)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
# https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.665.635&rep=rep1&type=pdf
r3_m <- lm(difE ~  STATE, data_m, weights = data_m$weights)
stargazer(r1_m, r2_m, r3_m, column.labels = c(""), type = "text",
title = "Treatment Effect", header = FALSE, label = "tab:reg1")
